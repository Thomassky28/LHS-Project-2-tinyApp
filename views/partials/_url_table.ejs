<div>
  <table class='table table-striped'>
    <thead>
      <tr>
        <th>Short URL</th>
        <th>Long URL</th>
        <% if(user){ %>
        <th colspan='2'>
          <!-- Use POST method to /urls_create so that it is rendered to urls_new.ejs -->
          <form action='/urls/new' method='POST'>
            <button class='btn btn-success' type='submit'>Create new short URL</button>
          </form>
        </th>
        <% } %>
      </tr>
    </thead>
    <tbody>
      <% Object.keys(urls).forEach(key =>{ %>
      <tr>
        <td><%= urls[key].id %></td>
        <td><%= urls[key].address %></td>
        <% if(user){ %>
        <% if(urls[key].user_id === user.id){ %>
        <td>
          <form action='<%- `/urls/${urls[key].id}` %>' method='POST'>
            <button class='btn btn-warning' type='submit'>Update</button>
          </form>
        </td>
        <td>
          <form action='<%- `/urls/${urls[key].id}/delete` %>' method='POST'>
            <button class='btn btn-danger' type='submit'>Delete</button>
          </form>
        </td>
        <% }else{ %>
          <!-- blank <td> for rows that don't belong to current user -->
          <td></td>
          <td></td>
        <% } %>
        <% } %>
      </tr>
      <% }) %>
    </tbody>
  </table>
</div>
