<!DOCTYPE html>
<html lang='en'>
  <head>
    <%- include('partials/_header') %>
  </head>
  <body>
    <% if(username !== undefined){ %>
    <div>
      <table>
        <tr>
          <th>Short URL</th>
          <th>Long URL</th>
        </tr>
        <% Object.keys(urls).forEach(shortURL =>{ %>
        <tr>
          <td><%= shortURL %></td>
          <td><%= urls[shortURL] %></td>
          <td>
            <form action='<%- `/urls/${shortURL}` %>' method='POST'>
              <input type='submit' value='Update'>
            </form>
          </td>
          <td>
            <form action='<%- `/urls/${shortURL}/delete` %>' method='POST'>
              <input type='submit' value='Delete'>
            </form>
          </td>
        </tr>
        <% }) %>
      </table>
      <!-- Use POST method to /urls_create so that it is rendered to urls_new.ejs -->
      <form action='/urls/new' method='POST'>
        <input type='submit' value='Create new short URL'>
      </form>
    </div>
    <% } %>
    <%- include('partials/_footer')%>
  </body>
</html>